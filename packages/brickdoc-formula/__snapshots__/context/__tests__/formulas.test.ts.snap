// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`appendFormulas constant 1`] = `
Array [
  Object {
    "blockDependencies": Array [],
    "codeFragments": Array [
      Object {
        "attrs": undefined,
        "code": "Equal",
        "display": "=",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "=",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "123",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "123",
      },
    ],
    "cst": Object {
      "children": Object {
        "Equal": Array [
          Object {
            "endColumn": 1,
            "endLine": 1,
            "endOffset": 0,
            "image": "=",
            "startColumn": 1,
            "startLine": 1,
            "startOffset": 0,
            "tokenType": Object {
              "CATEGORIES": Array [
                Object {
                  "CATEGORIES": Array [],
                  "PATTERN": /NOT_APPLICABLE/,
                  "categoryMatches": Array [
                    18,
                    19,
                    21,
                    22,
                  ],
                  "categoryMatchesMap": Object {
                    "18": true,
                    "19": true,
                    "21": true,
                    "22": true,
                  },
                  "isParent": true,
                  "name": "EqualCompareOperator",
                  "tokenTypeIdx": 3,
                },
              ],
              "PATTERN": /=/,
              "categoryMatches": Array [],
              "categoryMatchesMap": Object {},
              "isParent": false,
              "name": "Equal",
              "tokenTypeIdx": 18,
            },
            "tokenTypeIdx": 18,
          },
        ],
        "expression": Array [
          Object {
            "children": Object {
              "lhs": Array [
                Object {
                  "children": Object {
                    "lhs": Array [
                      Object {
                        "children": Object {
                          "rhs": Array [
                            Object {
                              "children": Object {
                                "lhs": Array [
                                  Object {
                                    "children": Object {
                                      "lhs": Array [
                                        Object {
                                          "children": Object {
                                            "lhs": Array [
                                              Object {
                                                "children": Object {
                                                  "lhs": Array [
                                                    Object {
                                                      "children": Object {
                                                        "lhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "constantExpression": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "NumberLiteralExpression": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "NumberLiteral": Array [
                                                                                              Object {
                                                                                                "endColumn": 4,
                                                                                                "endLine": 1,
                                                                                                "endOffset": 3,
                                                                                                "image": "123",
                                                                                                "startColumn": 2,
                                                                                                "startLine": 1,
                                                                                                "startOffset": 1,
                                                                                                "tokenType": Object {
                                                                                                  "CATEGORIES": Array [],
                                                                                                  "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                  "categoryMatches": Array [],
                                                                                                  "categoryMatchesMap": Object {},
                                                                                                  "isParent": false,
                                                                                                  "name": "NumberLiteral",
                                                                                                  "tokenTypeIdx": 44,
                                                                                                },
                                                                                                "tokenTypeIdx": 44,
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "NumberLiteralExpression",
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "constantExpression",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                      },
                                                      "name": "additionExpression",
                                                    },
                                                  ],
                                                },
                                                "name": "concatExpression",
                                              },
                                            ],
                                          },
                                          "name": "inExpression",
                                        },
                                      ],
                                    },
                                    "name": "compareExpression",
                                  },
                                ],
                              },
                              "name": "equalCompareExpression",
                            },
                          ],
                        },
                        "name": "notExpression",
                      },
                    ],
                  },
                  "name": "combineExpression",
                },
              ],
            },
            "name": "expression",
          },
        ],
      },
      "name": "startExpression",
    },
    "definition": "=123",
    "flattenVariableDependencies": Array [],
    "functionDependencies": Array [],
    "isAsync": false,
    "isEffect": false,
    "isPersist": true,
    "isPure": true,
    "kind": "constant",
    "name": "foo",
    "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
    "task": Object {
      "async": false,
      "execEndTime": null,
      "execStartTime": null,
      "uuid": null,
      "variableValue": Object {
        "result": Object {
          "result": 123,
          "type": "number",
        },
        "success": true,
      },
    },
    "type": "normal",
    "valid": true,
    "variableDependencies": Array [],
    "variableId": "1588aedf-06e1-47f1-9282-d2ffe865974c",
    "variableNameDependencies": Array [],
    "version": 0,
  },
]
`;

exports[`appendFormulas expression 1`] = `
Array [
  Object {
    "blockDependencies": Array [],
    "codeFragments": Array [
      Object {
        "attrs": undefined,
        "code": "Equal",
        "display": "=",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "=",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "123",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "123",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "Plus",
        "display": "+",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "+",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "0.123",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "0.123",
      },
    ],
    "cst": Object {
      "children": Object {
        "Equal": Array [
          Object {
            "endColumn": 1,
            "endLine": 1,
            "endOffset": 0,
            "image": "=",
            "startColumn": 1,
            "startLine": 1,
            "startOffset": 0,
            "tokenType": Object {
              "CATEGORIES": Array [
                Object {
                  "CATEGORIES": Array [],
                  "PATTERN": /NOT_APPLICABLE/,
                  "categoryMatches": Array [
                    18,
                    19,
                    21,
                    22,
                  ],
                  "categoryMatchesMap": Object {
                    "18": true,
                    "19": true,
                    "21": true,
                    "22": true,
                  },
                  "isParent": true,
                  "name": "EqualCompareOperator",
                  "tokenTypeIdx": 3,
                },
              ],
              "PATTERN": /=/,
              "categoryMatches": Array [],
              "categoryMatchesMap": Object {},
              "isParent": false,
              "name": "Equal",
              "tokenTypeIdx": 18,
            },
            "tokenTypeIdx": 18,
          },
        ],
        "expression": Array [
          Object {
            "children": Object {
              "lhs": Array [
                Object {
                  "children": Object {
                    "lhs": Array [
                      Object {
                        "children": Object {
                          "rhs": Array [
                            Object {
                              "children": Object {
                                "lhs": Array [
                                  Object {
                                    "children": Object {
                                      "lhs": Array [
                                        Object {
                                          "children": Object {
                                            "lhs": Array [
                                              Object {
                                                "children": Object {
                                                  "lhs": Array [
                                                    Object {
                                                      "children": Object {
                                                        "AdditionOperator": Array [
                                                          Object {
                                                            "endColumn": 7,
                                                            "endLine": 1,
                                                            "endOffset": 6,
                                                            "image": "+",
                                                            "startColumn": 7,
                                                            "startLine": 1,
                                                            "startOffset": 6,
                                                            "tokenType": Object {
                                                              "CATEGORIES": Array [
                                                                Object {
                                                                  "CATEGORIES": Array [],
                                                                  "PATTERN": /NOT_APPLICABLE/,
                                                                  "categoryMatches": Array [
                                                                    25,
                                                                    34,
                                                                  ],
                                                                  "categoryMatchesMap": Object {
                                                                    "25": true,
                                                                    "34": true,
                                                                  },
                                                                  "isParent": true,
                                                                  "name": "AdditionOperator",
                                                                  "tokenTypeIdx": 5,
                                                                },
                                                              ],
                                                              "PATTERN": /\\\\\\+/,
                                                              "categoryMatches": Array [],
                                                              "categoryMatchesMap": Object {},
                                                              "isParent": false,
                                                              "name": "Plus",
                                                              "tokenTypeIdx": 25,
                                                            },
                                                            "tokenTypeIdx": 25,
                                                          },
                                                        ],
                                                        "lhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "constantExpression": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "NumberLiteralExpression": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "NumberLiteral": Array [
                                                                                              Object {
                                                                                                "endColumn": 5,
                                                                                                "endLine": 1,
                                                                                                "endOffset": 4,
                                                                                                "image": "123",
                                                                                                "startColumn": 3,
                                                                                                "startLine": 1,
                                                                                                "startOffset": 2,
                                                                                                "tokenType": Object {
                                                                                                  "CATEGORIES": Array [],
                                                                                                  "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                  "categoryMatches": Array [],
                                                                                                  "categoryMatchesMap": Object {},
                                                                                                  "isParent": false,
                                                                                                  "name": "NumberLiteral",
                                                                                                  "tokenTypeIdx": 44,
                                                                                                },
                                                                                                "tokenTypeIdx": 44,
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "NumberLiteralExpression",
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "constantExpression",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                        "rhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "constantExpression": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "NumberLiteralExpression": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "NumberLiteral": Array [
                                                                                              Object {
                                                                                                "endColumn": 13,
                                                                                                "endLine": 1,
                                                                                                "endOffset": 12,
                                                                                                "image": "0.123",
                                                                                                "startColumn": 9,
                                                                                                "startLine": 1,
                                                                                                "startOffset": 8,
                                                                                                "tokenType": Object {
                                                                                                  "CATEGORIES": Array [],
                                                                                                  "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                  "categoryMatches": Array [],
                                                                                                  "categoryMatchesMap": Object {},
                                                                                                  "isParent": false,
                                                                                                  "name": "NumberLiteral",
                                                                                                  "tokenTypeIdx": 44,
                                                                                                },
                                                                                                "tokenTypeIdx": 44,
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "NumberLiteralExpression",
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "constantExpression",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                      },
                                                      "name": "additionExpression",
                                                    },
                                                  ],
                                                },
                                                "name": "concatExpression",
                                              },
                                            ],
                                          },
                                          "name": "inExpression",
                                        },
                                      ],
                                    },
                                    "name": "compareExpression",
                                  },
                                ],
                              },
                              "name": "equalCompareExpression",
                            },
                          ],
                        },
                        "name": "notExpression",
                      },
                    ],
                  },
                  "name": "combineExpression",
                },
              ],
            },
            "name": "expression",
          },
        ],
      },
      "name": "startExpression",
    },
    "definition": "= 123 + 0.123",
    "flattenVariableDependencies": Array [],
    "functionDependencies": Array [],
    "isAsync": false,
    "isEffect": false,
    "isPersist": true,
    "isPure": true,
    "kind": "constant",
    "name": "foo",
    "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
    "task": Object {
      "async": false,
      "execEndTime": null,
      "execStartTime": null,
      "uuid": null,
      "variableValue": Object {
        "result": Object {
          "result": 123.123,
          "type": "number",
        },
        "success": true,
      },
    },
    "type": "normal",
    "valid": true,
    "variableDependencies": Array [],
    "variableId": "1588aedf-06e1-47f1-9282-d2ffe865974c",
    "variableNameDependencies": Array [],
    "version": 0,
  },
  Object {
    "blockDependencies": Array [
      "d986e871-cb85-4bd5-b675-87307f60b882",
    ],
    "codeFragments": Array [
      Object {
        "attrs": undefined,
        "code": "Equal",
        "display": "=",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "=",
      },
      Object {
        "attrs": undefined,
        "code": "Function",
        "display": "ABS",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "ABS",
      },
      Object {
        "attrs": undefined,
        "code": "LParen",
        "display": "(",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "(",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "123",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "123",
      },
      Object {
        "attrs": undefined,
        "code": "RParen",
        "display": ")",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": ")",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "Plus",
        "display": "+",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "+",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": Object {
          "id": "d986e871-cb85-4bd5-b675-87307f60b882",
          "kind": "Block",
          "name": "Untitled",
          "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
        },
        "code": "Block",
        "display": "Untitled",
        "errors": Array [],
        "hide": false,
        "renderText": [Function],
        "type": "Block",
        "value": "#d986e871-cb85-4bd5-b675-87307f60b882",
      },
      Object {
        "attrs": undefined,
        "code": "Dot",
        "display": ".",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": ".",
      },
      Object {
        "attrs": Object {
          "id": "1588aedf-06e1-47f1-9282-d2ffe865974c",
          "kind": "Variable",
          "name": "foo",
          "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
        },
        "code": "Variable",
        "display": "foo",
        "errors": Array [],
        "hide": false,
        "renderText": [Function],
        "type": "string",
        "value": "foo",
      },
    ],
    "cst": Object {
      "children": Object {
        "Equal": Array [
          Object {
            "endColumn": 1,
            "endLine": 1,
            "endOffset": 0,
            "image": "=",
            "startColumn": 1,
            "startLine": 1,
            "startOffset": 0,
            "tokenType": Object {
              "CATEGORIES": Array [
                Object {
                  "CATEGORIES": Array [],
                  "PATTERN": /NOT_APPLICABLE/,
                  "categoryMatches": Array [
                    18,
                    19,
                    21,
                    22,
                  ],
                  "categoryMatchesMap": Object {
                    "18": true,
                    "19": true,
                    "21": true,
                    "22": true,
                  },
                  "isParent": true,
                  "name": "EqualCompareOperator",
                  "tokenTypeIdx": 3,
                },
              ],
              "PATTERN": /=/,
              "categoryMatches": Array [],
              "categoryMatchesMap": Object {},
              "isParent": false,
              "name": "Equal",
              "tokenTypeIdx": 18,
            },
            "tokenTypeIdx": 18,
          },
        ],
        "expression": Array [
          Object {
            "children": Object {
              "lhs": Array [
                Object {
                  "children": Object {
                    "lhs": Array [
                      Object {
                        "children": Object {
                          "rhs": Array [
                            Object {
                              "children": Object {
                                "lhs": Array [
                                  Object {
                                    "children": Object {
                                      "lhs": Array [
                                        Object {
                                          "children": Object {
                                            "lhs": Array [
                                              Object {
                                                "children": Object {
                                                  "lhs": Array [
                                                    Object {
                                                      "children": Object {
                                                        "AdditionOperator": Array [
                                                          Object {
                                                            "endColumn": 11,
                                                            "endLine": 1,
                                                            "endOffset": 10,
                                                            "image": "+",
                                                            "startColumn": 11,
                                                            "startLine": 1,
                                                            "startOffset": 10,
                                                            "tokenType": Object {
                                                              "CATEGORIES": Array [
                                                                Object {
                                                                  "CATEGORIES": Array [],
                                                                  "PATTERN": /NOT_APPLICABLE/,
                                                                  "categoryMatches": Array [
                                                                    25,
                                                                    34,
                                                                  ],
                                                                  "categoryMatchesMap": Object {
                                                                    "25": true,
                                                                    "34": true,
                                                                  },
                                                                  "isParent": true,
                                                                  "name": "AdditionOperator",
                                                                  "tokenTypeIdx": 5,
                                                                },
                                                              ],
                                                              "PATTERN": /\\\\\\+/,
                                                              "categoryMatches": Array [],
                                                              "categoryMatchesMap": Object {},
                                                              "isParent": false,
                                                              "name": "Plus",
                                                              "tokenTypeIdx": 25,
                                                            },
                                                            "tokenTypeIdx": 25,
                                                          },
                                                        ],
                                                        "lhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "FunctionCall": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "Arguments": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "expression": Array [
                                                                                              Object {
                                                                                                "children": Object {
                                                                                                  "lhs": Array [
                                                                                                    Object {
                                                                                                      "children": Object {
                                                                                                        "lhs": Array [
                                                                                                          Object {
                                                                                                            "children": Object {
                                                                                                              "rhs": Array [
                                                                                                                Object {
                                                                                                                  "children": Object {
                                                                                                                    "lhs": Array [
                                                                                                                      Object {
                                                                                                                        "children": Object {
                                                                                                                          "lhs": Array [
                                                                                                                            Object {
                                                                                                                              "children": Object {
                                                                                                                                "lhs": Array [
                                                                                                                                  Object {
                                                                                                                                    "children": Object {
                                                                                                                                      "lhs": Array [
                                                                                                                                        Object {
                                                                                                                                          "children": Object {
                                                                                                                                            "lhs": Array [
                                                                                                                                              Object {
                                                                                                                                                "children": Object {
                                                                                                                                                  "lhs": Array [
                                                                                                                                                    Object {
                                                                                                                                                      "children": Object {
                                                                                                                                                        "lhs": Array [
                                                                                                                                                          Object {
                                                                                                                                                            "children": Object {
                                                                                                                                                              "simpleAtomicExpression": Array [
                                                                                                                                                                Object {
                                                                                                                                                                  "children": Object {
                                                                                                                                                                    "constantExpression": Array [
                                                                                                                                                                      Object {
                                                                                                                                                                        "children": Object {
                                                                                                                                                                          "NumberLiteralExpression": Array [
                                                                                                                                                                            Object {
                                                                                                                                                                              "children": Object {
                                                                                                                                                                                "NumberLiteral": Array [
                                                                                                                                                                                  Object {
                                                                                                                                                                                    "endColumn": 8,
                                                                                                                                                                                    "endLine": 1,
                                                                                                                                                                                    "endOffset": 7,
                                                                                                                                                                                    "image": "123",
                                                                                                                                                                                    "startColumn": 6,
                                                                                                                                                                                    "startLine": 1,
                                                                                                                                                                                    "startOffset": 5,
                                                                                                                                                                                    "tokenType": Object {
                                                                                                                                                                                      "CATEGORIES": Array [],
                                                                                                                                                                                      "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                                                                                                      "categoryMatches": Array [],
                                                                                                                                                                                      "categoryMatchesMap": Object {},
                                                                                                                                                                                      "isParent": false,
                                                                                                                                                                                      "name": "NumberLiteral",
                                                                                                                                                                                      "tokenTypeIdx": 44,
                                                                                                                                                                                    },
                                                                                                                                                                                    "tokenTypeIdx": 44,
                                                                                                                                                                                  },
                                                                                                                                                                                ],
                                                                                                                                                                              },
                                                                                                                                                                              "name": "NumberLiteralExpression",
                                                                                                                                                                            },
                                                                                                                                                                          ],
                                                                                                                                                                        },
                                                                                                                                                                        "name": "constantExpression",
                                                                                                                                                                      },
                                                                                                                                                                    ],
                                                                                                                                                                  },
                                                                                                                                                                  "name": "simpleAtomicExpression",
                                                                                                                                                                },
                                                                                                                                                              ],
                                                                                                                                                            },
                                                                                                                                                            "name": "atomicExpression",
                                                                                                                                                          },
                                                                                                                                                        ],
                                                                                                                                                      },
                                                                                                                                                      "name": "chainExpression",
                                                                                                                                                    },
                                                                                                                                                  ],
                                                                                                                                                },
                                                                                                                                                "name": "multiplicationExpression",
                                                                                                                                              },
                                                                                                                                            ],
                                                                                                                                          },
                                                                                                                                          "name": "additionExpression",
                                                                                                                                        },
                                                                                                                                      ],
                                                                                                                                    },
                                                                                                                                    "name": "concatExpression",
                                                                                                                                  },
                                                                                                                                ],
                                                                                                                              },
                                                                                                                              "name": "inExpression",
                                                                                                                            },
                                                                                                                          ],
                                                                                                                        },
                                                                                                                        "name": "compareExpression",
                                                                                                                      },
                                                                                                                    ],
                                                                                                                  },
                                                                                                                  "name": "equalCompareExpression",
                                                                                                                },
                                                                                                              ],
                                                                                                            },
                                                                                                            "name": "notExpression",
                                                                                                          },
                                                                                                        ],
                                                                                                      },
                                                                                                      "name": "combineExpression",
                                                                                                    },
                                                                                                  ],
                                                                                                },
                                                                                                "name": "expression",
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "Arguments",
                                                                                        },
                                                                                      ],
                                                                                      "FunctionName": Array [
                                                                                        Object {
                                                                                          "endColumn": 4,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 3,
                                                                                          "image": "ABS",
                                                                                          "startColumn": 2,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 1,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\[a-zA-Z_\\]\\(\\(\\?!\\[,"'\`&#@:!\\$%\\^<>/\\?\\*=\\.;~\\|\\[\\(\\)\\{\\}\\+\\\\\\\\\\\\-\\\\\\]\\\\s\\]\\)\\.\\)\\*/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "FunctionName",
                                                                                            "tokenTypeIdx": 52,
                                                                                          },
                                                                                          "tokenTypeIdx": 52,
                                                                                        },
                                                                                      ],
                                                                                      "LParen": Array [
                                                                                        Object {
                                                                                          "endColumn": 5,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 4,
                                                                                          "image": "(",
                                                                                          "startColumn": 5,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 4,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\\\\\(/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "LParen",
                                                                                            "tokenTypeIdx": 37,
                                                                                          },
                                                                                          "tokenTypeIdx": 37,
                                                                                        },
                                                                                      ],
                                                                                      "RParen": Array [
                                                                                        Object {
                                                                                          "endColumn": 9,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 8,
                                                                                          "image": ")",
                                                                                          "startColumn": 9,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 8,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\\\\\)/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "RParen",
                                                                                            "tokenTypeIdx": 38,
                                                                                          },
                                                                                          "tokenTypeIdx": 38,
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "FunctionCall",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                        "rhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "Dot": Array [
                                                                      Object {
                                                                        "endColumn": 50,
                                                                        "endLine": 1,
                                                                        "endOffset": 49,
                                                                        "image": ".",
                                                                        "startColumn": 50,
                                                                        "startLine": 1,
                                                                        "startOffset": 49,
                                                                        "tokenType": Object {
                                                                          "CATEGORIES": Array [],
                                                                          "PATTERN": /\\\\\\./,
                                                                          "categoryMatches": Array [],
                                                                          "categoryMatchesMap": Object {},
                                                                          "isParent": false,
                                                                          "name": "Dot",
                                                                          "tokenTypeIdx": 32,
                                                                        },
                                                                        "tokenTypeIdx": 32,
                                                                      },
                                                                    ],
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "blockExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "Sharp": Array [
                                                                                  Object {
                                                                                    "endColumn": 13,
                                                                                    "endLine": 1,
                                                                                    "endOffset": 12,
                                                                                    "image": "#",
                                                                                    "startColumn": 13,
                                                                                    "startLine": 1,
                                                                                    "startOffset": 12,
                                                                                    "tokenType": Object {
                                                                                      "CATEGORIES": Array [],
                                                                                      "PATTERN": /#/,
                                                                                      "categoryMatches": Array [],
                                                                                      "categoryMatchesMap": Object {},
                                                                                      "isParent": false,
                                                                                      "name": "Sharp",
                                                                                      "tokenTypeIdx": 31,
                                                                                    },
                                                                                    "tokenTypeIdx": 31,
                                                                                  },
                                                                                ],
                                                                                "UUID": Array [
                                                                                  Object {
                                                                                    "endColumn": 49,
                                                                                    "endLine": 1,
                                                                                    "endOffset": 48,
                                                                                    "image": "d986e871-cb85-4bd5-b675-87307f60b882",
                                                                                    "startColumn": 14,
                                                                                    "startLine": 1,
                                                                                    "startOffset": 13,
                                                                                    "tokenType": Object {
                                                                                      "CATEGORIES": Array [],
                                                                                      "PATTERN": /\\[0-9a-f\\]\\{8\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{12\\}/,
                                                                                      "categoryMatches": Array [],
                                                                                      "categoryMatchesMap": Object {},
                                                                                      "isParent": false,
                                                                                      "name": "UUID",
                                                                                      "tokenTypeIdx": 33,
                                                                                    },
                                                                                    "tokenTypeIdx": 33,
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "blockExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                    "rhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "FunctionName": Array [
                                                                            Object {
                                                                              "endColumn": 53,
                                                                              "endLine": 1,
                                                                              "endOffset": 52,
                                                                              "image": "foo",
                                                                              "startColumn": 51,
                                                                              "startLine": 1,
                                                                              "startOffset": 50,
                                                                              "tokenType": Object {
                                                                                "CATEGORIES": Array [],
                                                                                "PATTERN": /\\[a-zA-Z_\\]\\(\\(\\?!\\[,"'\`&#@:!\\$%\\^<>/\\?\\*=\\.;~\\|\\[\\(\\)\\{\\}\\+\\\\\\\\\\\\-\\\\\\]\\\\s\\]\\)\\.\\)\\*/,
                                                                                "categoryMatches": Array [],
                                                                                "categoryMatchesMap": Object {},
                                                                                "isParent": false,
                                                                                "name": "FunctionName",
                                                                                "tokenTypeIdx": 52,
                                                                              },
                                                                              "tokenTypeIdx": 52,
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "keyExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                      },
                                                      "name": "additionExpression",
                                                    },
                                                  ],
                                                },
                                                "name": "concatExpression",
                                              },
                                            ],
                                          },
                                          "name": "inExpression",
                                        },
                                      ],
                                    },
                                    "name": "compareExpression",
                                  },
                                ],
                              },
                              "name": "equalCompareExpression",
                            },
                          ],
                        },
                        "name": "notExpression",
                      },
                    ],
                  },
                  "name": "combineExpression",
                },
              ],
            },
            "name": "expression",
          },
        ],
      },
      "name": "startExpression",
    },
    "definition": "=ABS(123) + #d986e871-cb85-4bd5-b675-87307f60b882.foo",
    "flattenVariableDependencies": Array [
      Object {
        "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
        "variableId": "1588aedf-06e1-47f1-9282-d2ffe865974c",
      },
    ],
    "functionDependencies": Array [
      Object {
        "acceptError": false,
        "args": Array [
          Object {
            "name": "number",
            "type": "number",
          },
        ],
        "async": false,
        "chain": false,
        "description": "Returns the absolute value of a number.",
        "effect": false,
        "examples": Array [
          Object {
            "codeFragments": Array [
              Object {
                "attrs": undefined,
                "code": "Equal",
                "display": "=",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "=",
              },
              Object {
                "attrs": undefined,
                "code": "Function",
                "display": "ABS",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "ABS",
              },
              Object {
                "attrs": undefined,
                "code": "LParen",
                "display": "(",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "(",
              },
              Object {
                "attrs": undefined,
                "code": "Minus",
                "display": "-",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "-",
              },
              Object {
                "attrs": undefined,
                "code": "NumberLiteral",
                "display": "1",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "number",
                "value": "1",
              },
              Object {
                "attrs": undefined,
                "code": "RParen",
                "display": ")",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "number",
                "value": ")",
              },
            ],
            "input": "=ABS(-1)",
            "output": Object {
              "result": 1,
              "type": "number",
            },
          },
        ],
        "group": "core",
        "key": "ABS",
        "lazy": false,
        "name": "ABS",
        "persist": true,
        "pure": true,
        "reference": [Function],
        "returns": "number",
        "testCases": Array [
          Object {
            "input": Array [
              -1,
            ],
            "output": 1,
          },
        ],
      },
    ],
    "isAsync": false,
    "isEffect": false,
    "isPersist": true,
    "isPure": true,
    "kind": "expression",
    "name": "bar",
    "namespaceId": "615d7f74-dc97-4aae-8690-b6cba1072a6a",
    "task": Object {
      "async": false,
      "execEndTime": null,
      "execStartTime": null,
      "uuid": null,
      "variableValue": Object {
        "result": Object {
          "result": 246.123,
          "type": "number",
        },
        "success": true,
      },
    },
    "type": "normal",
    "valid": true,
    "variableDependencies": Array [
      Object {
        "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
        "variableId": "1588aedf-06e1-47f1-9282-d2ffe865974c",
      },
    ],
    "variableId": "475d9e73-e52a-42b3-8a95-477596812900",
    "variableNameDependencies": Array [
      Object {
        "name": "foo",
        "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
      },
    ],
    "version": 0,
  },
]
`;

exports[`appendFormulas expression 2`] = `
Object {
  "ABS": Array [
    Object {
      "namespaceId": "615d7f74-dc97-4aae-8690-b6cba1072a6a",
      "variableId": "475d9e73-e52a-42b3-8a95-477596812900",
    },
  ],
}
`;

exports[`appendFormulas expression 3`] = `
Object {
  "#d986e871-cb85-4bd5-b675-87307f60b882.1588aedf-06e1-47f1-9282-d2ffe865974c": Array [
    Object {
      "namespaceId": "615d7f74-dc97-4aae-8690-b6cba1072a6a",
      "variableId": "475d9e73-e52a-42b3-8a95-477596812900",
    },
  ],
}
`;

exports[`appendFormulas parse error 1`] = `
Array [
  Object {
    "blockDependencies": Array [],
    "codeFragments": Array [
      Object {
        "attrs": undefined,
        "code": "Equal",
        "display": "=",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "=",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "123",
        "errors": Array [
          Object {
            "message": "Missing right expression",
            "type": "syntax",
          },
          Object {
            "message": "Parse error: \\"\\"",
            "type": "parse",
          },
        ],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "123",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "Plus",
        "display": "+",
        "errors": Array [
          Object {
            "message": "Missing right expression",
            "type": "syntax",
          },
        ],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "+",
      },
    ],
    "cst": Object {
      "children": Object {
        "Equal": Array [
          Object {
            "endColumn": 1,
            "endLine": 1,
            "endOffset": 0,
            "image": "=",
            "startColumn": 1,
            "startLine": 1,
            "startOffset": 0,
            "tokenType": Object {
              "CATEGORIES": Array [
                Object {
                  "CATEGORIES": Array [],
                  "PATTERN": /NOT_APPLICABLE/,
                  "categoryMatches": Array [
                    18,
                    19,
                    21,
                    22,
                  ],
                  "categoryMatchesMap": Object {
                    "18": true,
                    "19": true,
                    "21": true,
                    "22": true,
                  },
                  "isParent": true,
                  "name": "EqualCompareOperator",
                  "tokenTypeIdx": 3,
                },
              ],
              "PATTERN": /=/,
              "categoryMatches": Array [],
              "categoryMatchesMap": Object {},
              "isParent": false,
              "name": "Equal",
              "tokenTypeIdx": 18,
            },
            "tokenTypeIdx": 18,
          },
        ],
        "expression": Array [
          Object {
            "children": Object {
              "lhs": Array [
                Object {
                  "children": Object {
                    "lhs": Array [
                      Object {
                        "children": Object {
                          "rhs": Array [
                            Object {
                              "children": Object {
                                "lhs": Array [
                                  Object {
                                    "children": Object {
                                      "lhs": Array [
                                        Object {
                                          "children": Object {
                                            "lhs": Array [
                                              Object {
                                                "children": Object {
                                                  "lhs": Array [
                                                    Object {
                                                      "children": Object {
                                                        "AdditionOperator": Array [
                                                          Object {
                                                            "endColumn": 7,
                                                            "endLine": 1,
                                                            "endOffset": 6,
                                                            "image": "+",
                                                            "startColumn": 7,
                                                            "startLine": 1,
                                                            "startOffset": 6,
                                                            "tokenType": Object {
                                                              "CATEGORIES": Array [
                                                                Object {
                                                                  "CATEGORIES": Array [],
                                                                  "PATTERN": /NOT_APPLICABLE/,
                                                                  "categoryMatches": Array [
                                                                    25,
                                                                    34,
                                                                  ],
                                                                  "categoryMatchesMap": Object {
                                                                    "25": true,
                                                                    "34": true,
                                                                  },
                                                                  "isParent": true,
                                                                  "name": "AdditionOperator",
                                                                  "tokenTypeIdx": 5,
                                                                },
                                                              ],
                                                              "PATTERN": /\\\\\\+/,
                                                              "categoryMatches": Array [],
                                                              "categoryMatchesMap": Object {},
                                                              "isParent": false,
                                                              "name": "Plus",
                                                              "tokenTypeIdx": 25,
                                                            },
                                                            "tokenTypeIdx": 25,
                                                          },
                                                        ],
                                                        "lhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "constantExpression": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "NumberLiteralExpression": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "NumberLiteral": Array [
                                                                                              Object {
                                                                                                "endColumn": 5,
                                                                                                "endLine": 1,
                                                                                                "endOffset": 4,
                                                                                                "image": "123",
                                                                                                "startColumn": 3,
                                                                                                "startLine": 1,
                                                                                                "startOffset": 2,
                                                                                                "tokenType": Object {
                                                                                                  "CATEGORIES": Array [],
                                                                                                  "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                  "categoryMatches": Array [],
                                                                                                  "categoryMatchesMap": Object {},
                                                                                                  "isParent": false,
                                                                                                  "name": "NumberLiteral",
                                                                                                  "tokenTypeIdx": 44,
                                                                                                },
                                                                                                "tokenTypeIdx": 44,
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "NumberLiteralExpression",
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "constantExpression",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                        "rhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {},
                                                                        "name": "atomicExpression",
                                                                        "recoveredNode": true,
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                  "recoveredNode": true,
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                            "recoveredNode": true,
                                                          },
                                                        ],
                                                      },
                                                      "name": "additionExpression",
                                                      "recoveredNode": true,
                                                    },
                                                  ],
                                                },
                                                "name": "concatExpression",
                                                "recoveredNode": true,
                                              },
                                            ],
                                          },
                                          "name": "inExpression",
                                          "recoveredNode": true,
                                        },
                                      ],
                                    },
                                    "name": "compareExpression",
                                    "recoveredNode": true,
                                  },
                                ],
                              },
                              "name": "equalCompareExpression",
                              "recoveredNode": true,
                            },
                          ],
                        },
                        "name": "notExpression",
                        "recoveredNode": true,
                      },
                    ],
                  },
                  "name": "combineExpression",
                  "recoveredNode": true,
                },
              ],
            },
            "name": "expression",
            "recoveredNode": true,
          },
        ],
      },
      "name": "startExpression",
      "recoveredNode": true,
    },
    "definition": "= 123 +",
    "flattenVariableDependencies": Array [],
    "functionDependencies": Array [],
    "isAsync": false,
    "isEffect": false,
    "isPersist": true,
    "isPure": true,
    "kind": "unknown",
    "name": "foo",
    "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
    "task": Object {
      "async": false,
      "execEndTime": null,
      "execStartTime": null,
      "uuid": null,
      "variableValue": Object {
        "result": Object {
          "errorKind": "syntax",
          "result": "Missing right expression",
          "type": "Error",
        },
        "success": false,
      },
    },
    "type": "normal",
    "valid": true,
    "variableDependencies": Array [],
    "variableId": "615d7f74-dc97-4aae-8690-b6cba1072a6a",
    "variableNameDependencies": Array [],
    "version": 0,
  },
]
`;

exports[`appendFormulas unmatched variable 1`] = `
Array [
  Object {
    "blockDependencies": Array [
      "d986e871-cb85-4bd5-b675-87307f60b882",
    ],
    "codeFragments": Array [
      Object {
        "attrs": undefined,
        "code": "Equal",
        "display": "=",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "=",
      },
      Object {
        "attrs": undefined,
        "code": "Function",
        "display": "ABS",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "ABS",
      },
      Object {
        "attrs": undefined,
        "code": "LParen",
        "display": "(",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "(",
      },
      Object {
        "attrs": undefined,
        "code": "NumberLiteral",
        "display": "123",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "123",
      },
      Object {
        "attrs": undefined,
        "code": "RParen",
        "display": ")",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": ")",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "Plus",
        "display": "+",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "number",
        "value": "+",
      },
      Object {
        "attrs": undefined,
        "code": "Space",
        "display": " ",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": " ",
      },
      Object {
        "attrs": undefined,
        "code": "Sharp",
        "display": "#",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "#",
      },
      Object {
        "attrs": undefined,
        "code": "UUID",
        "display": "d986e871-cb85-4bd5-b675-87307f60b882",
        "errors": Array [
          Object {
            "message": "Block not found: d986e871-cb85-4bd5-b675-87307f60b882",
            "type": "deps",
          },
        ],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": "d986e871-cb85-4bd5-b675-87307f60b882",
      },
      Object {
        "attrs": undefined,
        "code": "Dot",
        "display": ".",
        "errors": Array [],
        "hide": false,
        "renderText": undefined,
        "type": "any",
        "value": ".",
      },
      Object {
        "attrs": undefined,
        "code": "FunctionName",
        "display": "foo",
        "errors": Array [
          Object {
            "message": "Variable \\"foo\\" not found",
            "type": "deps",
          },
        ],
        "hide": false,
        "renderText": undefined,
        "type": "string",
        "value": "foo",
      },
    ],
    "cst": Object {
      "children": Object {
        "Equal": Array [
          Object {
            "endColumn": 1,
            "endLine": 1,
            "endOffset": 0,
            "image": "=",
            "startColumn": 1,
            "startLine": 1,
            "startOffset": 0,
            "tokenType": Object {
              "CATEGORIES": Array [
                Object {
                  "CATEGORIES": Array [],
                  "PATTERN": /NOT_APPLICABLE/,
                  "categoryMatches": Array [
                    18,
                    19,
                    21,
                    22,
                  ],
                  "categoryMatchesMap": Object {
                    "18": true,
                    "19": true,
                    "21": true,
                    "22": true,
                  },
                  "isParent": true,
                  "name": "EqualCompareOperator",
                  "tokenTypeIdx": 3,
                },
              ],
              "PATTERN": /=/,
              "categoryMatches": Array [],
              "categoryMatchesMap": Object {},
              "isParent": false,
              "name": "Equal",
              "tokenTypeIdx": 18,
            },
            "tokenTypeIdx": 18,
          },
        ],
        "expression": Array [
          Object {
            "children": Object {
              "lhs": Array [
                Object {
                  "children": Object {
                    "lhs": Array [
                      Object {
                        "children": Object {
                          "rhs": Array [
                            Object {
                              "children": Object {
                                "lhs": Array [
                                  Object {
                                    "children": Object {
                                      "lhs": Array [
                                        Object {
                                          "children": Object {
                                            "lhs": Array [
                                              Object {
                                                "children": Object {
                                                  "lhs": Array [
                                                    Object {
                                                      "children": Object {
                                                        "AdditionOperator": Array [
                                                          Object {
                                                            "endColumn": 11,
                                                            "endLine": 1,
                                                            "endOffset": 10,
                                                            "image": "+",
                                                            "startColumn": 11,
                                                            "startLine": 1,
                                                            "startOffset": 10,
                                                            "tokenType": Object {
                                                              "CATEGORIES": Array [
                                                                Object {
                                                                  "CATEGORIES": Array [],
                                                                  "PATTERN": /NOT_APPLICABLE/,
                                                                  "categoryMatches": Array [
                                                                    25,
                                                                    34,
                                                                  ],
                                                                  "categoryMatchesMap": Object {
                                                                    "25": true,
                                                                    "34": true,
                                                                  },
                                                                  "isParent": true,
                                                                  "name": "AdditionOperator",
                                                                  "tokenTypeIdx": 5,
                                                                },
                                                              ],
                                                              "PATTERN": /\\\\\\+/,
                                                              "categoryMatches": Array [],
                                                              "categoryMatchesMap": Object {},
                                                              "isParent": false,
                                                              "name": "Plus",
                                                              "tokenTypeIdx": 25,
                                                            },
                                                            "tokenTypeIdx": 25,
                                                          },
                                                        ],
                                                        "lhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "simpleAtomicExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "FunctionCall": Array [
                                                                                  Object {
                                                                                    "children": Object {
                                                                                      "Arguments": Array [
                                                                                        Object {
                                                                                          "children": Object {
                                                                                            "expression": Array [
                                                                                              Object {
                                                                                                "children": Object {
                                                                                                  "lhs": Array [
                                                                                                    Object {
                                                                                                      "children": Object {
                                                                                                        "lhs": Array [
                                                                                                          Object {
                                                                                                            "children": Object {
                                                                                                              "rhs": Array [
                                                                                                                Object {
                                                                                                                  "children": Object {
                                                                                                                    "lhs": Array [
                                                                                                                      Object {
                                                                                                                        "children": Object {
                                                                                                                          "lhs": Array [
                                                                                                                            Object {
                                                                                                                              "children": Object {
                                                                                                                                "lhs": Array [
                                                                                                                                  Object {
                                                                                                                                    "children": Object {
                                                                                                                                      "lhs": Array [
                                                                                                                                        Object {
                                                                                                                                          "children": Object {
                                                                                                                                            "lhs": Array [
                                                                                                                                              Object {
                                                                                                                                                "children": Object {
                                                                                                                                                  "lhs": Array [
                                                                                                                                                    Object {
                                                                                                                                                      "children": Object {
                                                                                                                                                        "lhs": Array [
                                                                                                                                                          Object {
                                                                                                                                                            "children": Object {
                                                                                                                                                              "simpleAtomicExpression": Array [
                                                                                                                                                                Object {
                                                                                                                                                                  "children": Object {
                                                                                                                                                                    "constantExpression": Array [
                                                                                                                                                                      Object {
                                                                                                                                                                        "children": Object {
                                                                                                                                                                          "NumberLiteralExpression": Array [
                                                                                                                                                                            Object {
                                                                                                                                                                              "children": Object {
                                                                                                                                                                                "NumberLiteral": Array [
                                                                                                                                                                                  Object {
                                                                                                                                                                                    "endColumn": 8,
                                                                                                                                                                                    "endLine": 1,
                                                                                                                                                                                    "endOffset": 7,
                                                                                                                                                                                    "image": "123",
                                                                                                                                                                                    "startColumn": 6,
                                                                                                                                                                                    "startLine": 1,
                                                                                                                                                                                    "startOffset": 5,
                                                                                                                                                                                    "tokenType": Object {
                                                                                                                                                                                      "CATEGORIES": Array [],
                                                                                                                                                                                      "PATTERN": /\\[0-9\\]\\+\\[\\.\\]\\?\\[0-9\\]\\*\\(\\[eE\\]\\[\\+-\\]\\[0-9\\]\\+\\)\\?/,
                                                                                                                                                                                      "categoryMatches": Array [],
                                                                                                                                                                                      "categoryMatchesMap": Object {},
                                                                                                                                                                                      "isParent": false,
                                                                                                                                                                                      "name": "NumberLiteral",
                                                                                                                                                                                      "tokenTypeIdx": 44,
                                                                                                                                                                                    },
                                                                                                                                                                                    "tokenTypeIdx": 44,
                                                                                                                                                                                  },
                                                                                                                                                                                ],
                                                                                                                                                                              },
                                                                                                                                                                              "name": "NumberLiteralExpression",
                                                                                                                                                                            },
                                                                                                                                                                          ],
                                                                                                                                                                        },
                                                                                                                                                                        "name": "constantExpression",
                                                                                                                                                                      },
                                                                                                                                                                    ],
                                                                                                                                                                  },
                                                                                                                                                                  "name": "simpleAtomicExpression",
                                                                                                                                                                },
                                                                                                                                                              ],
                                                                                                                                                            },
                                                                                                                                                            "name": "atomicExpression",
                                                                                                                                                          },
                                                                                                                                                        ],
                                                                                                                                                      },
                                                                                                                                                      "name": "chainExpression",
                                                                                                                                                    },
                                                                                                                                                  ],
                                                                                                                                                },
                                                                                                                                                "name": "multiplicationExpression",
                                                                                                                                              },
                                                                                                                                            ],
                                                                                                                                          },
                                                                                                                                          "name": "additionExpression",
                                                                                                                                        },
                                                                                                                                      ],
                                                                                                                                    },
                                                                                                                                    "name": "concatExpression",
                                                                                                                                  },
                                                                                                                                ],
                                                                                                                              },
                                                                                                                              "name": "inExpression",
                                                                                                                            },
                                                                                                                          ],
                                                                                                                        },
                                                                                                                        "name": "compareExpression",
                                                                                                                      },
                                                                                                                    ],
                                                                                                                  },
                                                                                                                  "name": "equalCompareExpression",
                                                                                                                },
                                                                                                              ],
                                                                                                            },
                                                                                                            "name": "notExpression",
                                                                                                          },
                                                                                                        ],
                                                                                                      },
                                                                                                      "name": "combineExpression",
                                                                                                    },
                                                                                                  ],
                                                                                                },
                                                                                                "name": "expression",
                                                                                              },
                                                                                            ],
                                                                                          },
                                                                                          "name": "Arguments",
                                                                                        },
                                                                                      ],
                                                                                      "FunctionName": Array [
                                                                                        Object {
                                                                                          "endColumn": 4,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 3,
                                                                                          "image": "ABS",
                                                                                          "startColumn": 2,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 1,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\[a-zA-Z_\\]\\(\\(\\?!\\[,"'\`&#@:!\\$%\\^<>/\\?\\*=\\.;~\\|\\[\\(\\)\\{\\}\\+\\\\\\\\\\\\-\\\\\\]\\\\s\\]\\)\\.\\)\\*/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "FunctionName",
                                                                                            "tokenTypeIdx": 52,
                                                                                          },
                                                                                          "tokenTypeIdx": 52,
                                                                                        },
                                                                                      ],
                                                                                      "LParen": Array [
                                                                                        Object {
                                                                                          "endColumn": 5,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 4,
                                                                                          "image": "(",
                                                                                          "startColumn": 5,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 4,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\\\\\(/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "LParen",
                                                                                            "tokenTypeIdx": 37,
                                                                                          },
                                                                                          "tokenTypeIdx": 37,
                                                                                        },
                                                                                      ],
                                                                                      "RParen": Array [
                                                                                        Object {
                                                                                          "endColumn": 9,
                                                                                          "endLine": 1,
                                                                                          "endOffset": 8,
                                                                                          "image": ")",
                                                                                          "startColumn": 9,
                                                                                          "startLine": 1,
                                                                                          "startOffset": 8,
                                                                                          "tokenType": Object {
                                                                                            "CATEGORIES": Array [],
                                                                                            "PATTERN": /\\\\\\)/,
                                                                                            "categoryMatches": Array [],
                                                                                            "categoryMatchesMap": Object {},
                                                                                            "isParent": false,
                                                                                            "name": "RParen",
                                                                                            "tokenTypeIdx": 38,
                                                                                          },
                                                                                          "tokenTypeIdx": 38,
                                                                                        },
                                                                                      ],
                                                                                    },
                                                                                    "name": "FunctionCall",
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "simpleAtomicExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                        "rhs": Array [
                                                          Object {
                                                            "children": Object {
                                                              "lhs": Array [
                                                                Object {
                                                                  "children": Object {
                                                                    "Dot": Array [
                                                                      Object {
                                                                        "endColumn": 50,
                                                                        "endLine": 1,
                                                                        "endOffset": 49,
                                                                        "image": ".",
                                                                        "startColumn": 50,
                                                                        "startLine": 1,
                                                                        "startOffset": 49,
                                                                        "tokenType": Object {
                                                                          "CATEGORIES": Array [],
                                                                          "PATTERN": /\\\\\\./,
                                                                          "categoryMatches": Array [],
                                                                          "categoryMatchesMap": Object {},
                                                                          "isParent": false,
                                                                          "name": "Dot",
                                                                          "tokenTypeIdx": 32,
                                                                        },
                                                                        "tokenTypeIdx": 32,
                                                                      },
                                                                    ],
                                                                    "lhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "blockExpression": Array [
                                                                            Object {
                                                                              "children": Object {
                                                                                "Sharp": Array [
                                                                                  Object {
                                                                                    "endColumn": 13,
                                                                                    "endLine": 1,
                                                                                    "endOffset": 12,
                                                                                    "image": "#",
                                                                                    "startColumn": 13,
                                                                                    "startLine": 1,
                                                                                    "startOffset": 12,
                                                                                    "tokenType": Object {
                                                                                      "CATEGORIES": Array [],
                                                                                      "PATTERN": /#/,
                                                                                      "categoryMatches": Array [],
                                                                                      "categoryMatchesMap": Object {},
                                                                                      "isParent": false,
                                                                                      "name": "Sharp",
                                                                                      "tokenTypeIdx": 31,
                                                                                    },
                                                                                    "tokenTypeIdx": 31,
                                                                                  },
                                                                                ],
                                                                                "UUID": Array [
                                                                                  Object {
                                                                                    "endColumn": 49,
                                                                                    "endLine": 1,
                                                                                    "endOffset": 48,
                                                                                    "image": "d986e871-cb85-4bd5-b675-87307f60b882",
                                                                                    "startColumn": 14,
                                                                                    "startLine": 1,
                                                                                    "startOffset": 13,
                                                                                    "tokenType": Object {
                                                                                      "CATEGORIES": Array [],
                                                                                      "PATTERN": /\\[0-9a-f\\]\\{8\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{4\\}-\\[0-9a-f\\]\\{12\\}/,
                                                                                      "categoryMatches": Array [],
                                                                                      "categoryMatchesMap": Object {},
                                                                                      "isParent": false,
                                                                                      "name": "UUID",
                                                                                      "tokenTypeIdx": 33,
                                                                                    },
                                                                                    "tokenTypeIdx": 33,
                                                                                  },
                                                                                ],
                                                                              },
                                                                              "name": "blockExpression",
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "atomicExpression",
                                                                      },
                                                                    ],
                                                                    "rhs": Array [
                                                                      Object {
                                                                        "children": Object {
                                                                          "FunctionName": Array [
                                                                            Object {
                                                                              "endColumn": 53,
                                                                              "endLine": 1,
                                                                              "endOffset": 52,
                                                                              "image": "foo",
                                                                              "startColumn": 51,
                                                                              "startLine": 1,
                                                                              "startOffset": 50,
                                                                              "tokenType": Object {
                                                                                "CATEGORIES": Array [],
                                                                                "PATTERN": /\\[a-zA-Z_\\]\\(\\(\\?!\\[,"'\`&#@:!\\$%\\^<>/\\?\\*=\\.;~\\|\\[\\(\\)\\{\\}\\+\\\\\\\\\\\\-\\\\\\]\\\\s\\]\\)\\.\\)\\*/,
                                                                                "categoryMatches": Array [],
                                                                                "categoryMatchesMap": Object {},
                                                                                "isParent": false,
                                                                                "name": "FunctionName",
                                                                                "tokenTypeIdx": 52,
                                                                              },
                                                                              "tokenTypeIdx": 52,
                                                                            },
                                                                          ],
                                                                        },
                                                                        "name": "keyExpression",
                                                                      },
                                                                    ],
                                                                  },
                                                                  "name": "chainExpression",
                                                                },
                                                              ],
                                                            },
                                                            "name": "multiplicationExpression",
                                                          },
                                                        ],
                                                      },
                                                      "name": "additionExpression",
                                                    },
                                                  ],
                                                },
                                                "name": "concatExpression",
                                              },
                                            ],
                                          },
                                          "name": "inExpression",
                                        },
                                      ],
                                    },
                                    "name": "compareExpression",
                                  },
                                ],
                              },
                              "name": "equalCompareExpression",
                            },
                          ],
                        },
                        "name": "notExpression",
                      },
                    ],
                  },
                  "name": "combineExpression",
                },
              ],
            },
            "name": "expression",
          },
        ],
      },
      "name": "startExpression",
    },
    "definition": "=ABS(123) + #d986e871-cb85-4bd5-b675-87307f60b882.foo",
    "flattenVariableDependencies": Array [],
    "functionDependencies": Array [
      Object {
        "acceptError": false,
        "args": Array [
          Object {
            "name": "number",
            "type": "number",
          },
        ],
        "async": false,
        "chain": false,
        "description": "Returns the absolute value of a number.",
        "effect": false,
        "examples": Array [
          Object {
            "codeFragments": Array [
              Object {
                "attrs": undefined,
                "code": "Equal",
                "display": "=",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "=",
              },
              Object {
                "attrs": undefined,
                "code": "Function",
                "display": "ABS",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "ABS",
              },
              Object {
                "attrs": undefined,
                "code": "LParen",
                "display": "(",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "(",
              },
              Object {
                "attrs": undefined,
                "code": "Minus",
                "display": "-",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "any",
                "value": "-",
              },
              Object {
                "attrs": undefined,
                "code": "NumberLiteral",
                "display": "1",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "number",
                "value": "1",
              },
              Object {
                "attrs": undefined,
                "code": "RParen",
                "display": ")",
                "errors": Array [],
                "hide": false,
                "renderText": undefined,
                "type": "number",
                "value": ")",
              },
            ],
            "input": "=ABS(-1)",
            "output": Object {
              "result": 1,
              "type": "number",
            },
          },
        ],
        "group": "core",
        "key": "ABS",
        "lazy": false,
        "name": "ABS",
        "persist": true,
        "pure": true,
        "reference": [Function],
        "returns": "number",
        "testCases": Array [
          Object {
            "input": Array [
              -1,
            ],
            "output": 1,
          },
        ],
      },
    ],
    "isAsync": false,
    "isEffect": false,
    "isPersist": true,
    "isPure": true,
    "kind": "unknown",
    "name": "bar",
    "namespaceId": "615d7f74-dc97-4aae-8690-b6cba1072a6a",
    "task": Object {
      "async": false,
      "execEndTime": null,
      "execStartTime": null,
      "uuid": null,
      "variableValue": Object {
        "result": Object {
          "errorKind": "deps",
          "result": "Block not found: d986e871-cb85-4bd5-b675-87307f60b882",
          "type": "Error",
        },
        "success": false,
      },
    },
    "type": "normal",
    "valid": true,
    "variableDependencies": Array [],
    "variableId": "475d9e73-e52a-42b3-8a95-477596812900",
    "variableNameDependencies": Array [
      Object {
        "name": "foo",
        "namespaceId": "d986e871-cb85-4bd5-b675-87307f60b882",
      },
    ],
    "version": 0,
  },
]
`;
