#!/usr/bin/env ruby
# frozen_string_literal: true
require 'yaml'
file_path = File.expand_path('../config/domain_blacklist.yml', __dir__)
list = YAML.load_file(file_path)

common = list[:common].map(&:to_s).sort.uniq
File.open(file_path, 'w') do |f|
  f.write("# Run `bin/order-spacedomain-blacklist` to optimize blacklist.\n" + {
    common: common,
    saas: (list[:saas].map(&:to_s) - (list[:saas].map(&:to_s) & common)).sort.uniq
  }.to_yaml)
end

puts "#{file_path} updated."
